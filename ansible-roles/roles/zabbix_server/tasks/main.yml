---
- name: add-repo
  include: add-repo.yml

- name: install
  include: install.yml

- name: config
  include: config.yml

- name: mysql
  include: mysql.yml

- name: "Configure zabbix-server"
  template:
    src: zabbix_server.conf.j2
    dest: /etc/zabbix/zabbix_server.conf
    owner: zabbix
    group: zabbix
    mode: 0644
  notify:
    - restart zabbix-server
  tags:
    - zabbix-server
    - init
    - config

- name: "Create include dir zabbix-server"
  file:
    path: "{{ zabbix_server_include }}"
    owner: zabbix
    group: zabbix
    state: directory
    mode: 0755

- name: "Zabbix-server started"
  systemd:
    name: zabbix-server
    state: started
    enabled: yes
  tags:
    - zabbix-server

#- name: firewall
#  include: firewall.yml
